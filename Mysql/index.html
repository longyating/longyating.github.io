<!DOCTYPE HTML>
<html lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
    <!--Setting-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta name="apple-mobile-web-app-capable" content="龙娅婷">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no,email=no,adress=no">
    <meta name="browsermode" content="application">
    <meta name="screen-orientation" content="portrait">
    <link rel="dns-prefetch" href="http://yoursite.com">
    <!--SEO-->

    <meta name="keywords" content="关键字">


    <meta name="description" content="索引有什么副作用吗？（1）索引是有大量数据的时候才建立的，没有大量数据反而会浪费时间，因为索引是使用二叉树建立.
（2）当一个系统查询比较频繁，而新建，修改等操作比较少时，可以创建索引，这样查询...">



<meta name="robots" content="all">
<meta name="google" content="all">
<meta name="googlebot" content="all">
<meta name="verify" content="all">

    <!--Title-->


<title>Mysql要学习的不仅仅是增删改查 | 龙娅婷</title>


    <link rel="alternate" href="/atom.xml" title="龙娅婷" type="application/atom+xml">


    <link rel="icon" href="/img/bitbug_favicon.ico">

    



<link rel="stylesheet" href="/css/bootstrap.min.css?rev=3.3.7">
<link rel="stylesheet" href="/css/font-awesome.min.css?rev=4.5.0">
<link rel="stylesheet" href="/css/style.css?rev=@@hash">




    
	<div class="hide">
		<script type="text/javascript">
			var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan class='cnzz_stat_icon_1263868967 hide' %3E%3Cscript%20src%3D%22https%3A%2F%2Fs95.cnzz.com%2Fz_stat.php%3Fweb_id%3D1272564536%22%3E%3C%2Fscript%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s19.cnzz.com/z_stat.php%3Fid%3D1263868967%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
		</script>
	</div>






    

</head>

</html>
<!--[if lte IE 8]>
<style>
    html{ font-size: 1em }
</style>
<![endif]-->
<!--[if lte IE 9]>
<div style="ie">你使用的浏览器版本过低，为了你更好的阅读体验，请更新浏览器的版本或者使用其他现代浏览器，比如Chrome、Firefox、Safari等。</div>
<![endif]-->

<body>
    <header class="main-header" style="background-image:url(http://snippet.shenliyang.com/img/banner.jpg)">
    <div class="main-header-box">
        <a class="header-avatar" href="/" title="longyating">
            <img src="/img/avatar.jpg" alt="logo头像" class="img-responsive center-block">
        </a>
        <div class="branding">
        	<!--<h2 class="text-hide">Snippet主题,从未如此简单有趣</h2>-->
            
                 <img src="/img/branding.png" alt="Snippet 博客主题" class="img-responsive center-block">
            
    	</div>
    </div>
</header>
    <nav class="main-navigation">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="navbar-header"><span class="nav-toggle-button collapsed pull-right" data-toggle="collapse" data-target="#main-menu" id="mnav">
                    <span class="sr-only"></span>
                        <i class="fa fa-bars"></i>
                    </span>
                    <a class="navbar-brand" href="http://yoursite.com">龙娅婷</a>
                </div>
                <div class="collapse navbar-collapse" id="main-menu">
                    <ul class="menu">
                        
                            <li role="presentation" class="text-center">
                                <a href="/"><i class="fa "></i>首页</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/充电学习/"><i class="fa "></i>充电学习</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/有趣的题/"><i class="fa "></i>有趣的题</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/读书笔记/"><i class="fa "></i>读书笔记</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/吉他"><i class="fa "></i>吉他</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/categories/摄影游记"><i class="fa "></i>摄影游记</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/archives/"><i class="fa "></i>时间轴</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="https://www.longyating.com/bbs/"><i class="fa "></i>留言板</a>
                            </li>
                        
                            <li role="presentation" class="text-center">
                                <a href="/about/"><i class="fa "></i>关于</a>
                            </li>
                        
                    </ul>
                </div>
            </div>
        </div>
    </div>
</nav>
    <section class="content-wrap">
        <div class="container">
            <div class="row">
                <main class="col-md-8 main-content m-post">
                    <p id="process"></p>
<article class="post">
    <div class="post-head">
        <h1 id="Mysql要学习的不仅仅是增删改查">
            
	            Mysql要学习的不仅仅是增删改查
            
        </h1>
        <div class="post-meta">
    
        <span class="categories-meta fa-wrap">
            <i class="fa fa-folder-open-o"></i>
            <a class="category-link" href="/categories/有趣的题/">有趣的题</a>
        </span>
    

    
        <span class="fa-wrap">
            <i class="fa fa-tags"></i>
            <span class="tags-meta">
                
            </span>
        </span>
    

    
        
        <span class="fa-wrap">
            <i class="fa fa-clock-o"></i>
            <span class="date-meta">2020/04/15</span>
        </span>
        
    
</div>
            
            
    </div>
    
    <div class="post-body post-content">
        <h2 id="索引有什么副作用吗？"><a href="#索引有什么副作用吗？" class="headerlink" title="索引有什么副作用吗？"></a><a href="https://www.cnblogs.com/dyh-air/articles/7891264.html" target="_blank" rel="noopener">索引有什么副作用吗？</a></h2><p>（1）索引是有大量数据的时候才建立的，没有大量数据反而会浪费时间，因为索引是使用二叉树建立.</p>
<p>（2）当一个系统查询比较频繁，而新建，修改等操作比较少时，可以创建索引，这样查询的速度会比以前快很多，同时也带来弊端，就是新建或修改等操作时，比没有索引或没有建立覆盖索引时的要慢。</p>
<p>（3）索引并不是越多越好，太多索引会占用很多的索引表空间，甚至比存储一条记录更多。<br>对于需要频繁新增记录的表，最好不要创建索引，没有索引的表，执行insert、append都很快，有了索引以后，会多一个维护索引的操作，一些大表可能导致insert 速度非常慢。</p>
<h2 id="主键和外键"><a href="#主键和外键" class="headerlink" title="主键和外键"></a><a href="https://www.cnblogs.com/PyLearn/p/7624768.html" target="_blank" rel="noopener">主键和外键</a></h2><p>成绩表中的学号不是成绩表的主键，但它和学生表中的学号相对应，并且学生表中的学号是学生表的主键，则称成绩表中的学号是学生表的外键</p>
<table>
<thead>
<tr>
<th>区别</th>
<th>主键</th>
<th>外键</th>
<th>索引</th>
</tr>
</thead>
<tbody>
<tr>
<td>定义</td>
<td>唯一标识一条记录，不能有重复的，不允许为空</td>
<td>表的外键是另一表的主键, 外键可以有重复的, 可以是空值</td>
<td>该字段没有重复值，但可以有一个空值</td>
</tr>
<tr>
<td>作用</td>
<td>用来保证数据完整性</td>
<td>用来和其他表建立联系用的</td>
<td>是提高查询排序的速度</td>
</tr>
<tr>
<td>个数</td>
<td>主键只能有一个</td>
<td>一个表可以有多个外键</td>
<td>一个表可以有多个唯一索引</td>
</tr>
</tbody>
</table>
<h2 id="事务"><a href="#事务" class="headerlink" title="事务"></a><a href="https://baijiahao.baidu.com/s?id=1650065302592962405&amp;wfr=spider&amp;for=pc" target="_blank" rel="noopener">事务</a></h2><p>事务处理可以用来维护数据库的完整性，保证成批的 SQL 语句<strong>要么全部执行，要么全部不执行。</strong><br>事务是必须满足4个条件（ACID）：：原子性（Atomicity，或称不可分割性）、一致性（Consistency）、隔离性（Isolation，又称独立性）、持久性（Durability）。</p>
<ul>
<li><p>（原子性Atomicity）：原子性指的是事务是一个不可分割的，要么都执行要么都不执行。</p>
</li>
<li><p>（一致性Consistency）：事务必须使得数据库从一个一致性状态，到另外一个一致性状态。</p>
</li>
<li><p>（隔离性Isolation）：指的是一个事务的执行，不能被其他的事务所干扰。</p>
</li>
<li><p>（持久性Durability）：持久性指的是一个事务一旦提交了之后，对数据库的改变就是永久的。</p>
</li>
</ul>
<h2 id="聚集索引和非聚集索引的区别？"><a href="#聚集索引和非聚集索引的区别？" class="headerlink" title="聚集索引和非聚集索引的区别？"></a><a href="https://www.jianshu.com/p/d95d6d692e2c" target="_blank" rel="noopener">聚集索引和非聚集索引的区别？</a></h2><p>聚集索引表示表中存储的数据按照索引的顺序存储，检索效率比非聚集索引高，但对数据更新影响较大。</p>
<p>非聚集索引表示数据存储在一个地方，索引存储在另一个地方，索引带有指针指向数据的存储位置，非聚集索引检索效率比聚集索引低，但对数据更新影响较小。</p>
<ul>
<li>聚集索引一个表只能有一个，而非聚集索引一个表可以存在多个</li>
<li>聚集索引存储记录是物理上连续存在，而非聚集索引是逻辑上的连续，物理存储并不连续</li>
<li>聚集索引：物理存储按照索引排序；聚集索引是一种索引组织形式，索引的键值逻辑顺序决定了表数据行的物理存储顺序</li>
<li>非聚集索引：物理存储不按照索引排序；非聚集索引则就是普通索引了，仅仅只是对数据列创建相应的索引，不影响整个表的物理存储顺序.</li>
<li>索引是通过二叉树的数据结构来描述的，我们可以这么理解聚簇索引：索引的叶节点就是数据节点。而非聚簇索引的叶节点仍然是索引节点，只不过有一个指针指向对应的数据块。</li>
</ul>
<h2 id="设计三范式"><a href="#设计三范式" class="headerlink" title="设计三范式"></a>设计三范式</h2><ul>
<li>第一范式：强调的是列的原子性，列不能分成其他几列，第一范式就是无重复的域。</li>
<li>第二范式：首先是在第一范式的基础上，另外包含两部分的内容，一是表必须有主键，二是没有包含在主键中的列必须完全依赖于主键，二不能只依赖于主键的一部分。</li>
<li>第三范式：在第二范式的基础之上，非主键列必须直接依赖于主键不能存在传递依赖。</li>
</ul>
<p>目的：消除冗余，单纯依赖关系。不允许数据库表出现冗余字段，不允许表之间多重依赖</p>
<h2 id="MySql慢查询"><a href="#MySql慢查询" class="headerlink" title="MySql慢查询"></a>MySql慢查询</h2><p>MySQL的慢查询，全名是慢查询日志，是MySQL提供的一种日志记录，用来记录在MySQL中响应时间超过阀值的语句。</p>
<p>具体环境中，运行时间超过long_query_time值的SQL语句，则会被记录到慢查询日志中。</p>
<p>long_query_time的默认值为10，意思是记录运行10秒以上的语句。</p>
<p>默认情况下，MySQL数据库并不启动慢查询日志，需要手动来设置这个参数。</p>
<h3 id="查询数据库比较慢可能是哪些原因造成的？"><a href="#查询数据库比较慢可能是哪些原因造成的？" class="headerlink" title="查询数据库比较慢可能是哪些原因造成的？"></a><a href="https://blog.csdn.net/u011485276/article/details/82983118?depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-1&amp;utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-1" target="_blank" rel="noopener">查询数据库比较慢可能是哪些原因造成的？</a></h3><p>1、没有索引或者没有用到索引(这是查询慢最常见的问题，是程序设计的缺陷)<br>2、I/O吞吐量小，形成了瓶颈效应。<br>3、没有创建计算列导致查询不优化。<br>4、内存不足<br>5、网络速度慢<br>6、查询出的数据量过大（可以采用多次查询，其他的方法降低数据量）<br>7、锁或者死锁(这也是查询慢最常见的问题，是程序设计的缺陷)<br>8、sp_lock,sp_who,活动的用户查看，原因是读写竞争资源。<br>9、返回了不必要的行和列<br>10、查询语句不好，没有优化</p>
<h3 id="如何解决慢查询问题"><a href="#如何解决慢查询问题" class="headerlink" title="如何解决慢查询问题"></a><a href="https://www.jianshu.com/p/af48705f20b8" target="_blank" rel="noopener">如何解决慢查询问题</a></h3><p>要解决慢查询，就是优化这些查询缓慢的语句，或是重新组织自己的数据。<br>重新组织数据的表现形式是分表。对于成熟的业务系统而言，分表的代价是极高的。所以如何组织一张表仍然是建表的重要决策。<br>因此，优化语句才是解决慢查询的基本方法。</p>
<ul>
<li><strong>加索引</strong></li>
</ul>
<ol>
<li><p>使用LIKE关键字的查询语句<br>在使用LIKE关键字进行查询的查询语句中，如果匹配字符串的第一个字符为“%”，索引不会起作用。只有“%”不在第一个位置索引才会起作用。</p>
</li>
<li><p>使用多列索引的查询语句<br>MySQL可以为多个字段创建索引。一个索引最多可以包括16个字段。对于多列索引，只有查询条件使用了这些字段中的第一个字段时，索引才会被使用。</p>
</li>
</ol>
<ul>
<li>优化数据库结构<br>合理的数据库结构不仅可以使数据库占用更小的磁盘空间，而且能够使查询速度更快。数据库结构的设计，需要考虑数据冗余、查询和更新的速度、字段的数据类型是否合理等多方面的内容。</li>
</ul>
<ol>
<li><p>将字段很多的表分解成多个表<br>对于字段比较多的表，如果有些字段的使用频率很低，可以将这些字段分离出来形成新表。因为当一个表的数据量很大时，会由于使用频率低的字段的存在而变慢。</p>
</li>
<li><p>增加中间表<br>对于需要经常联合查询的表，可以建立中间表以提高查询效率。通过建立中间表，把需要经常联合查询的数据插入到中间表中，然后将原来的联合查询改为对中间表的查询，以此来提高查询效率。</p>
</li>
</ol>
<ul>
<li><p><strong>分解关联查询</strong><br>将一个大的查询分解为多个小查询是很有必要的。很多高性能的应用都会对关联查询进行分解，就是可以对每一个表进行一次单表查询，然后将查询结果在应用程序中进行关联</p>
</li>
<li><p><strong>Limit分页</strong><br>分页是一个常见的情景。分页通常会使用limit加上偏移量的方法实现，同时加上合适的order by 子句。如果有对应的索引，通常效率会不错，否则MySQL需要做大量的文件排序操作。<br>但是，当偏移量非常大的时候，例如可能是limit 10000,20这样的查询，MySQL需要查询10020条，但是只返回最后20条，这样的代价很高。<br><strong>优化此类查询的一个最简单的方法是尽可能的使用索引覆盖扫描，而不是查询所有的列。然后根据需要做一次关联操作再返回所需的列。对于偏移量很大的时候这样做的效率会得到很大提升。</strong></p>
</li>
</ul>
<p>参考文献<br><a href="https://www.jianshu.com/p/af48705f20b8" target="_blank" rel="noopener">常见Mysql的慢查询优化方式</a><br><a href="https://www.jianshu.com/p/9cd1c333874f" target="_blank" rel="noopener">MySQL中的慢查询</a><br><a href="https://blog.csdn.net/timchen525/article/details/75268151" target="_blank" rel="noopener">关于MySQL 通用查询日志和慢查询日志分析</a></p>

    </div>
    
    <div class="post-footer">
        <div>
            
                转载声明：商业转载请联系作者获得授权,非商业转载请注明出处 © <a href target="_blank">Snippet</a>
            
        </div>
        <div>
            
        </div>
    </div>
</article>

<div class="article-nav prev-next-wrap clearfix">
    
        <a href="/caozuoxitong/" class="pre-post btn btn-default" title="操作系统">
            <i class="fa fa-angle-left fa-fw"></i><span class="hidden-lg">上一篇</span>
            <span class="hidden-xs">操作系统</span>
        </a>
    
    
        <a href="/ceshi/" class="next-post btn btn-default" title="测试知识">
            <span class="hidden-lg">下一篇</span>
            <span class="hidden-xs">测试知识</span><i class="fa fa-angle-right fa-fw"></i>
        </a>
    
</div>


    <div id="comments">
        
	
    <div id="vcomments" class="valine"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="/assets/valine.min.js"></script>

    <script>
        new Valine({
            av: AV,
            el: '#vcomments',
            appId: 'eKSu1dU1EnS6hRhcryDVmhgq-gzGzoHsz',
            appKey: 'rnWgDAT2CH16DAKw6L9or4MG',
            placeholder: '说点什么吧，强烈建议留下昵称和邮箱。有回复就可以邮件提醒你~~(￣▽￣)~*',
            notify: true,
            verify: true,
            avatar: 'monsterid',
            meta: 'nick,mail'.split(','),
            pageSize: '10',
            path: window.location.pathname,
            lang: 'zh-CN'.toLowerCase()
        })
    </script>


    </div>





                </main>
                
                    <aside id="article-toc" role="navigation" class="col-md-4">
    <div class="widget">
        <h3 class="title">文章目录</h3>
        
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#索引有什么副作用吗？"><span class="toc-text">索引有什么副作用吗？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#主键和外键"><span class="toc-text">主键和外键</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#事务"><span class="toc-text">事务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#聚集索引和非聚集索引的区别？"><span class="toc-text">聚集索引和非聚集索引的区别？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#设计三范式"><span class="toc-text">设计三范式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySql慢查询"><span class="toc-text">MySql慢查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#查询数据库比较慢可能是哪些原因造成的？"><span class="toc-text">查询数据库比较慢可能是哪些原因造成的？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#如何解决慢查询问题"><span class="toc-text">如何解决慢查询问题</span></a></li></ol></li></ol>
        
    </div>
</aside>

                
            </div>
        </div>
    </section>
    <footer class="main-footer">
    <div class="container">
        <div class="row">
			
        </div>
    </div>
	
</footer>

<a id="back-to-top" class="icon-btn hide">
	<i class="fa fa-chevron-up"></i>
	
</a>



    <div class="copyright">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div class="busuanzi">
    
</div>

            </div>
            <div class="col-sm-12">
                <span>Copyright &copy; 2019 longyating
                </span> |
                <span>
                    Powered by <a href="//hexo.io" class="copyright-links" target="_blank" rel="nofollow">Hexo</a>
                </span> |
                <span>
                    Theme by <a href="//github.com/shenliyang/hexo-theme-snippet.git" class="copyright-links" target="_blank" rel="nofollow">Snippet</a>
                </span>
				
				


            </div>
			<span>
					<img src="https://static.dy208.cn/o_1dfilp8ruo521thr1hvf18ji17soa.png">
					<a href="http://www.beian.miit.gov.cn/" style="color:#f72b07" target="_blank">冀ICP备20004585号</a>
			</span>
        </div>
    </div>
</div>







<script src="/js/app.js?rev=@@hash"></script>

</body>
</html>



